{
  "id": "53668642-ea40-42fa-91e5-70aa90aa8aab",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.incidents": {
      "name": "incidents",
      "schema": "",
      "columns": {
        "incident_id": {
          "name": "incident_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "repo_id": {
          "name": "repo_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "severity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "signal_type": {
          "name": "signal_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "summary_md": {
          "name": "summary_md",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "status": {
          "name": "status",
          "type": "incident_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "evidence": {
          "name": "evidence",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "hypotheses": {
          "name": "hypotheses",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "work_item": {
          "name": "work_item",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'null'::jsonb"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'mcp'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "incidents_repo_id_repos_repo_id_fk": {
          "name": "incidents_repo_id_repos_repo_id_fk",
          "tableFrom": "incidents",
          "tableTo": "repos",
          "columnsFrom": [
            "repo_id"
          ],
          "columnsTo": [
            "repo_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.issues": {
      "name": "issues",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "issue_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'todo'"
        },
        "assignee": {
          "name": "assignee",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'P2'"
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "plan": {
          "name": "plan",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "links": {
          "name": "links",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "body_md": {
          "name": "body_md",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "issues_project_status_pos_idx": {
          "name": "issues_project_status_pos_idx",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "issues_project_id_projects_id_fk": {
          "name": "issues_project_id_projects_id_fk",
          "tableFrom": "issues",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.projects": {
      "name": "projects",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "repo": {
          "name": "repo",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner": {
          "name": "owner",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "next_issue_num": {
          "name": "next_issue_num",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "integrations": {
          "name": "integrations",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.repo_links": {
      "name": "repo_links",
      "schema": "",
      "columns": {
        "repo_id": {
          "name": "repo_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "repo_url": {
          "name": "repo_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issues_url": {
          "name": "issues_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "actions_url": {
          "name": "actions_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "deploy_dashboard": {
          "name": "deploy_dashboard",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "repo_links_repo_id_repos_repo_id_fk": {
          "name": "repo_links_repo_id_repos_repo_id_fk",
          "tableFrom": "repo_links",
          "tableTo": "repos",
          "columnsFrom": [
            "repo_id"
          ],
          "columnsTo": [
            "repo_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.repo_states": {
      "name": "repo_states",
      "schema": "",
      "columns": {
        "repo_id": {
          "name": "repo_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "health_status": {
          "name": "health_status",
          "type": "health_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "warnings_count": {
          "name": "warnings_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "deploy": {
          "name": "deploy",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "open_issues_count": {
          "name": "open_issues_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "rev": {
          "name": "rev",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "repo_states_repo_id_repos_repo_id_fk": {
          "name": "repo_states_repo_id_repos_repo_id_fk",
          "tableFrom": "repo_states",
          "tableTo": "repos",
          "columnsFrom": [
            "repo_id"
          ],
          "columnsTo": [
            "repo_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.repos": {
      "name": "repos",
      "schema": "",
      "columns": {
        "repo_id": {
          "name": "repo_id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "repo_full_name": {
          "name": "repo_full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "service_tier": {
          "name": "service_tier",
          "type": "service_tier",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'prod'"
        },
        "owners": {
          "name": "owners",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"primary\":null,\"backup\":null}'::jsonb"
        },
        "dev": {
          "name": "dev",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "architecture": {
          "name": "architecture",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "notes_md": {
          "name": "notes_md",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "rev": {
          "name": "rev",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "repos_repo_full_name_unique": {
          "name": "repos_repo_full_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "repo_full_name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.state_signals": {
      "name": "state_signals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "repo_id": {
          "name": "repo_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "signal_id": {
          "name": "signal_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "severity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "link": {
          "name": "link",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "state_signals_repo_id_repos_repo_id_fk": {
          "name": "state_signals_repo_id_repos_repo_id_fk",
          "tableFrom": "state_signals",
          "tableTo": "repos",
          "columnsFrom": [
            "repo_id"
          ],
          "columnsTo": [
            "repo_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.health_status": {
      "name": "health_status",
      "schema": "public",
      "values": [
        "healthy",
        "degraded",
        "down",
        "unknown"
      ]
    },
    "public.incident_status": {
      "name": "incident_status",
      "schema": "public",
      "values": [
        "open",
        "monitoring",
        "resolved"
      ]
    },
    "public.issue_status": {
      "name": "issue_status",
      "schema": "public",
      "values": [
        "todo",
        "doing",
        "done"
      ]
    },
    "public.service_tier": {
      "name": "service_tier",
      "schema": "public",
      "values": [
        "prod",
        "staging",
        "dev"
      ]
    },
    "public.severity": {
      "name": "severity",
      "schema": "public",
      "values": [
        "p0",
        "p1",
        "p2",
        "p3"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}